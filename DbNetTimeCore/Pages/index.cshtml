@model DbNetTimeCore.Pages.IndexModel
@{
    Layout = "_Layout";
}


<div role="tablist" class="tabs tabs-lifted m-5  tabs-lg">
    <input type="radio" name="my_tabs_2" role="tab" class="tab" aria-label="Customers" checked />
    <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-6">
        @await Html.PartialAsync("~/Pages/Shared/_gridControl.cshtml", Model.CustomersGrid)
    </div>

    <input type="radio" name="my_tabs_2" role="tab" class="tab" aria-label="Films" />
    <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-6">
        @await Html.PartialAsync("~/Pages/Shared/_gridControl.cshtml", Model.FilmsGrid)
    </div>

    <input type="radio" name="my_tabs_2" role="tab" class="tab" aria-label="Actors" />
    <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-6">
        @await Html.PartialAsync("~/Pages/Shared/_gridControl.cshtml", Model.ActorsGrid)
    </div>
</div>


@await Html.PartialAsync("~/Pages/Shared/_gridScript.cshtml")

@section Styles {
    @await Html.PartialAsync("~/Pages/Shared/_gridStyle.cshtml")
}

@section Scripts { 
    <script>
        document.addEventListener("customersGrid:pageLoaded", reRenderActive);

        function reRenderActive(event) {
            if (event.detail.htmxEvent)
            {
                if (event.detail.htmxEvent.target.tagName != "FORM") { 
                    return
                }
            }

            event.detail.gridControl.columnCells("active").run(cell => { transformActiveCell(cell) })
        }

        function transformActiveCell(cell) {
            if (cell.innerText == "0")
            {
                cell.innerText = "";
            }
            else
            {
                me(cell).classAdd("text-green-500");
                cell.innerHTML = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"3\" stroke=\"currentColor\" class=\"size-6\"><path stroke-linecap=\"round\" stroke - linejoin=\"round\" d=\"m4.5 12.75 6 6 9-13.5\"/></svg>";
            }
        }

    </script>
  
}
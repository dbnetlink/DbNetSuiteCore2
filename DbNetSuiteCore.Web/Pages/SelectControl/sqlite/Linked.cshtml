@page
@using DbNetSuiteCore.Enums
@using DbNetSuiteCore.Constants
@using DbNetSuiteCore.Helpers
@using DbNetSuiteCore.Models

@{
    var invoiceLineSelectModel = new SelectModel("Invoice_items") { Caption = "Tracks"};
    invoiceLineSelectModel.Columns = new List<SelectColumn>
    {
        new SelectColumn("invoicelineid"),
        new SelectColumn("trackid") {Lookup = new Lookup("tracks","trackid","name")},
        new SelectColumn("invoiceid") {ForeignKey = true }
    }; 

    var invoiceSelectModel = new SelectModel("Invoices") { Caption = "Invoices" };
    invoiceSelectModel.Columns = new List<SelectColumn>
    {
        new SelectColumn("invoiceid"),
        new SelectColumn("invoicedate"),
        new SelectColumn("customerid") {ForeignKey = true }
    };
    var customerSelectModel = new SelectModel(DataSourceType.SQLite, "Chinook(sqlite)", "Customers") { Caption = "Customers" };
    customerSelectModel.Columns = new List<SelectColumn>
    {
        new SelectColumn("customerid"),
        new SelectColumn("firstname"),
    };

    customerSelectModel.LinkedControl = invoiceSelectModel;
    invoiceSelectModel.LinkedControl = invoiceLineSelectModel;

    @(await DbNetSuiteCore.Control.Create(HttpContext).Render(customerSelectModel))
    @(await DbNetSuiteCore.Control.Create(HttpContext).Render(invoiceSelectModel))
    @(await DbNetSuiteCore.Control.Create(HttpContext).Render(invoiceLineSelectModel))
}
@page
@using DbNetSuiteCore.Enums
@using DbNetSuiteCore.Web.Enums
@using DbNetSuiteCore.Helpers
@using DbNetSuiteCore.Models
@using Microsoft.Extensions.Primitives;
@using DbNetSuiteCore.Web.Helpers
@{
    var columns = new List<GridColumn>()
    {
    new GridColumn("Orderid"),
    new GridColumn("Custid"),
    new GridColumn("Empid") {Lookup = new Lookup("employee","empid", "concat_ws(', ', lastname, firstname)"),Edit = true},
    new GridColumn("Orderdate") {Edit = true},
    new GridColumn("Requireddate") {Edit = true},
    new GridColumn("Shippeddate") {Edit = true},
    new GridColumn("Shipperid") {Lookup = new Lookup("shipper","shipperid", "companyname"),Edit = true},
    new GridColumn("Freight") {Edit = true},
    new GridColumn("Shipname") {Edit = true},
    new GridColumn("Shipaddress") {Edit = true},
    new GridColumn("Shipcity") {Edit = true},
    new GridColumn("Shipregion") {Edit = true},
    new GridColumn("Shippostalcode") {Edit = true},
    new GridColumn("Shipcountry") {Lookup = new Lookup(),Edit = true}
    };

    columns.ForEach(c => c.Filter = FilterType.Default);

    var ordersGrid = new GridModel(DataSourceType.PostgreSql, ConnectionStringHelper.TestConnectionString(Request.Query["db"], DataSourceType.PostgreSql), "salesorder");
    ordersGrid.Columns = columns;
    ordersGrid.OptimizeForLargeDataset = true;

    @(await new DbNetSuiteCore.GridControl(HttpContext).Render(ordersGrid))
}
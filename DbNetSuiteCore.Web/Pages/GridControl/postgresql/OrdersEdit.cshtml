@page
@using DbNetSuiteCore.Enums
@using DbNetSuiteCore.Web.Enums
@using DbNetSuiteCore.Helpers
@using DbNetSuiteCore.Models
@using Microsoft.Extensions.Primitives;
@using DbNetSuiteCore.Web.Helpers
@{
    var columns = new List<GridColumn>()
    {
    new GridColumn("Orderid"),
    new GridColumn("Custid"),
    new GridColumn("Empid") {Lookup = new Lookup("employee","empid", "concat_ws(', ', lastname, firstname)"), Editable = true},
    new GridColumn("Orderdate") { Editable = true},
    new GridColumn("Requireddate") { Editable = true},
    new GridColumn("Shippeddate") { Editable = true},
    new GridColumn("Shipperid") {Lookup = new Lookup("shipper","shipperid", "companyname"),Editable = true},
    new GridColumn("Freight") { Editable = true},
    new GridColumn("Shipname") { Editable = true},
    new GridColumn("Shipaddress") { Editable = true},
    new GridColumn("Shipcity") { Editable = true},
    new GridColumn("Shipregion") { Editable = true},
    new GridColumn("Shippostalcode") { Editable = true},
    new GridColumn("Shipcountry") {Lookup = new Lookup(),Editable = true}
    };

    columns.ForEach(c => c.Filter = FilterType.Default);

    var ordersGrid = new GridModel(DataSourceType.PostgreSql, ConnectionStringHelper.TestConnectionString(Request.Query["db"], DataSourceType.PostgreSql), "salesorder");
    ordersGrid.Columns = columns;
    ordersGrid.OptimizeForLargeDataset = true;

    @(await new DbNetSuiteCore.GridControl(HttpContext).Render(ordersGrid))
}
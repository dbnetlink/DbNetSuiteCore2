@page
@using DbNetSuiteCore.Enums
@using DbNetSuiteCore.Helpers
@using DbNetSuiteCore.Models

@{

    var filmColumns = new List<GridColumnModel>
    {
        new GridColumnModel("film_id") {PrimaryKey = true},
        new GridColumnModel("title"),
        new GridColumnModel("description"),
        new GridColumnModel("release_year"),
        new GridColumnModel("language_id"){ Lookup = new LookupModel("language", "language_id", "name")},
        new GridColumnModel("rental_duration"),
        new GridColumnModel("rental_rate"),
        new GridColumnModel("length"),
        new GridColumnModel("replacement_cost"),
        new GridColumnModel("rating"),
        new GridColumnModel("last_update"),
        new GridColumnModel("special_features"),
      //  new GridColumnModel("fulltext")
    };

    var filmCategoryColumns = new List<GridColumnModel>
    {
        new GridColumnModel("film_id") {ForeignKey = true},
        new GridColumnModel("category_id"){ Lookup = new LookupModel("category", "category_id", "name")},
        new GridColumnModel("last_update")
    };

    var filmCategoryGrid = new GridModel(DataSourceType.PostgreSql, "sakila(postgresql)", "film_category") { PageSize = 5 };
    filmCategoryGrid.Columns = filmCategoryColumns;

    var filmsGrid = new GridModel(DataSourceType.PostgreSql, "sakila(postgresql)", "film") { PageSize = 5 };
    filmsGrid.Columns = filmColumns;
    filmsGrid.LinkedGrid = filmCategoryGrid;

    @(await new DbNetSuiteCore.GridControl(HttpContext).Render(filmsGrid));

    @(await new DbNetSuiteCore.GridControl(HttpContext).Render(filmCategoryGrid)) ;
}
